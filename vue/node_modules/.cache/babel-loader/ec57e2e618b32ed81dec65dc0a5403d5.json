{"remainingRequest":"D:\\source\\book-lms\\vue\\node_modules\\babel-loader\\lib\\index.js!D:\\source\\book-lms\\vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\source\\book-lms\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\source\\book-lms\\vue\\src\\views\\Person.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\source\\book-lms\\vue\\src\\views\\Person.vue","mtime":1715489213499},{"path":"D:\\source\\book-lms\\vue\\babel.config.js","mtime":1715489213412},{"path":"D:\\source\\book-lms\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\source\\book-lms\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\source\\book-lms\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\source\\book-lms\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwppbXBvcnQgcmVxdWVzdCBmcm9tICJAL3V0aWxzL3JlcXVlc3QiOwppbXBvcnQgeyBFbE1lc3NhZ2UgfSBmcm9tICJlbGVtZW50LXBsdXMiOwppbXBvcnQgcm91dGVyIGZyb20gIkAvcm91dGVyIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJQZXJzb24iLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBmb3JtOiB7fQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgdXNlckpzb24gPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJ1c2VyIik7CgogICAgaWYgKCF1c2VySnNvbikgewogICAgICByb3V0ZXIucHVzaCgiL2xvZ2luIik7CiAgICB9CgogICAgdmFyIHN0ciA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInVzZXIiKSB8fCAie30iOwogICAgdGhpcy5mb3JtID0gSlNPTi5wYXJzZShzdHIpOwogIH0sCiAgbWV0aG9kczogewogICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXF1ZXN0LnB1dCgiL3VzZXIvdXBkYXRlIiwgdGhpcy5mb3JtKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwoKICAgICAgICBpZiAocmVzLmNvZGUgPT09ICcwJykgewogICAgICAgICAgRWxNZXNzYWdlLnN1Y2Nlc3MoIuabtOaWsOaIkOWKnyIpOwogICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgidXNlciIsIEpTT04uc3RyaW5naWZ5KF90aGlzLmZvcm0pKTsgLy8g6Kem5Y+RTGF5b3V05pu05paw55So5oi35L+h5oGvCgogICAgICAgICAgX3RoaXMuJGVtaXQoInVzZXJJbmZvIik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIEVsTWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["D:\\source\\book-lms\\vue\\src\\views\\Person.vue"],"names":[],"mappings":";AAqCA,OAAO,OAAP,MAAoB,iBAApB;AACA,SAAQ,SAAR,QAAwB,cAAxB;AACA,OAAO,MAAP,MAAmB,UAAnB;AAEA,eAAe;AACb,EAAA,IAAI,EAAE,QADO;AAEb,EAAA,IAFa,kBAEN;AACL,WAAO;AACL,MAAA,IAAI,EAAE;AADD,KAAP;AAGD,GANY;AAOb,EAAA,OAPa,qBAOH;AACR,QAAI,QAAO,GAAI,cAAc,CAAC,OAAf,CAAuB,MAAvB,CAAf;;AACA,QAAG,CAAC,QAAJ,EACA;AACE,MAAA,MAAM,CAAC,IAAP,CAAY,QAAZ;AACF;;AACA,QAAI,GAAE,GAAI,cAAc,CAAC,OAAf,CAAuB,MAAvB,KAAkC,IAA5C;AACA,SAAK,IAAL,GAAY,IAAI,CAAC,KAAL,CAAW,GAAX,CAAZ;AACD,GAfY;AAgBb,EAAA,OAAO,EAAE;AACP,IAAA,MADO,oBACE;AAAA;;AACP,MAAA,OAAO,CAAC,GAAR,CAAY,cAAZ,EAA4B,KAAK,IAAjC,EAAuC,IAAvC,CAA4C,UAAA,GAAE,EAAK;AACjD,QAAA,OAAO,CAAC,GAAR,CAAY,GAAZ;;AACA,YAAI,GAAG,CAAC,IAAJ,KAAa,GAAjB,EAAsB;AACpB,UAAA,SAAS,CAAC,OAAV,CAAkB,MAAlB;AACA,UAAA,cAAc,CAAC,OAAf,CAAuB,MAAvB,EAA+B,IAAI,CAAC,SAAL,CAAe,KAAI,CAAC,IAApB,CAA/B,EAFoB,CAGpB;;AACA,UAAA,KAAI,CAAC,KAAL,CAAW,UAAX;AACF,SALA,MAKO;AACL,UAAA,SAAS,CAAC,KAAV,CAAgB,GAAG,CAAC,GAApB;AACF;AACD,OAVD;AAYF;AAdO;AAhBI,CAAf","sourcesContent":["<template>\r\n  <div>\r\n    <el-card style=\"width: 40%; margin-left: 120px; margin-top: 40px\" >\r\n        <h2 style=\"padding: 30px\">个人信息</h2>\r\n      <el-form :model=\"form\" ref=\"form\" label-width=\"80px\">\r\n        <el-form-item label=\"用户名\">\r\n          <el-input style=\"width: 80%\" v-model=\"form.username\" disabled></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"姓名\">\r\n          <el-input style=\"width: 80%\" v-model=\"form.nickName\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"权限\">\r\n            <span v-if=\"form.role==1\" style=\"margin:5px\">管理员</span>\r\n            <span v-if=\"form.role==2\" style=\"margin:5px\">读者</span>\r\n        </el-form-item>\r\n        <el-form-item label=\"电话号码\">\r\n          <el-input style=\"width: 40%\" v-model=\"form.phone\"></el-input>\r\n          <el-tag type=\"danger\" style=\"margin-left: 20px\">如果修改了手机号请先重新登录再使用</el-tag>\r\n        </el-form-item>\r\n        <el-form-item label=\"性别\">\r\n          <div>\r\n            <el-radio v-model=\"form.sex\" label=\"男\">男</el-radio>\r\n            <el-radio v-model=\"form.sex\" label=\"女\">女</el-radio>\r\n          </div>\r\n        </el-form-item>\r\n        <el-form-item label=\"地址\">\r\n          <el-input type=\"textarea\" style=\"width: 80%\" v-model=\"form.address\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div style=\"text-align: center\">\r\n        <el-button type=\"primary\" @click=\"update\">保存</el-button>\r\n      </div>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport request from \"@/utils/request\";\r\nimport {ElMessage} from \"element-plus\";\r\nimport router from \"@/router\";\r\n\r\nexport default {\r\n  name: \"Person\",\r\n  data() {\r\n    return {\r\n      form: {}\r\n    }\r\n  },\r\n  created() {\r\n    let userJson = sessionStorage.getItem(\"user\")\r\n    if(!userJson)\r\n    {\r\n      router.push(\"/login\")\r\n    }\r\n    let str = sessionStorage.getItem(\"user\") || \"{}\"\r\n    this.form = JSON.parse(str)\r\n  },\r\n  methods: {\r\n    update() {\r\n      request.put(\"/user/update\", this.form).then(res => {\r\n        console.log(res)\r\n        if (res.code === '0') {\r\n          ElMessage.success(\"更新成功\")\r\n          sessionStorage.setItem(\"user\", JSON.stringify(this.form))\r\n          // 触发Layout更新用户信息\r\n          this.$emit(\"userInfo\")\r\n        } else {\r\n          ElMessage.error(res.msg)\r\n        }\r\n      })\r\n\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.avatar-uploader  {\r\n  border: 1px dashed #d9d9d9;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n.avatar-uploader:hover {\r\n  border-color: #409EFF;\r\n}\r\n\r\n.avatar {\r\n  width: 178px;\r\n  height: 178px;\r\n  display: block;\r\n}\r\n.box-card {\r\n  width: 60%;\r\n  margin: auto;\r\n  padding: 20px;\r\n}\r\n</style>\r\n"],"sourceRoot":""}]}