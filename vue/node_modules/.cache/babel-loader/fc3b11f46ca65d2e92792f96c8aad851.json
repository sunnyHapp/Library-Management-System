{"remainingRequest":"D:\\source\\book-lms\\vue\\node_modules\\babel-loader\\lib\\index.js!D:\\source\\book-lms\\vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\source\\book-lms\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\source\\book-lms\\vue\\src\\views\\Forget.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\source\\book-lms\\vue\\src\\views\\Forget.vue","mtime":1715489213498},{"path":"D:\\source\\book-lms\\vue\\babel.config.js","mtime":1715489213412},{"path":"D:\\source\\book-lms\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\source\\book-lms\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\source\\book-lms\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\source\\book-lms\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHJlcXVlc3QgZnJvbSAiLi4vdXRpbHMvcmVxdWVzdCI7CmltcG9ydCB7IEVsTWVzc2FnZSB9IGZyb20gImVsZW1lbnQtcGx1cyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiRm9yZ2V0IiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYnV0dG9uTmFtZTogIuiOt+WPluefreS/oemqjOivgeeggSIsCiAgICAgIGlzRGlzYWJsZWQ6IGZhbHNlLAogICAgICB0aW1lOiA2MCwKICAgICAgZm9ybToge30sCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgdXNlcm5hbWU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXnlKjmiLflkI0nLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfSwgewogICAgICAgICAgbWluOiAyLAogICAgICAgICAgbWF4OiAxMywKICAgICAgICAgIG1lc3NhZ2U6ICfplb/luqbopoHmsYLkuLoy5YiwMTPkvY0nLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0sCiAgICAgICAgcGFzc3dvcmQ6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXlr4bnoIEnLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0sCiAgICAgICAgY29uZmlybTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogIuivt+ehruiupOWvhueggSIsCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9XQogICAgICB9CiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgZ2V0Y29kZTogZnVuY3Rpb24gZ2V0Y29kZSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmICghdGhpcy5mb3JtLnVzZXJuYW1lKSB7CiAgICAgICAgRWxNZXNzYWdlLmVycm9yKCLor7floavlhpnnlKjmiLflkI0iKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICghdGhpcy5mb3JtLnBhc3N3b3JkKSB7CiAgICAgICAgRWxNZXNzYWdlLmVycm9yKCLor7floavlhpnmlrDlr4bnoIEiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmZvcm0ucGFzc3dvcmQgIT0gdGhpcy5mb3JtLmNvbmZpcm0pIHsKICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoIuS4pOasoeWvhueggei+k+WFpeS4jeS4gOiHtCIpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgcmVxdWVzdC5nZXQoImZvcmdldC9nZXRjb2RlIiwgewogICAgICAgIHBhcmFtczogewogICAgICAgICAgdXNlcm5hbWU6IHRoaXMuZm9ybS51c2VybmFtZQogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5jb2RlID09IDApIHsKICAgICAgICAgIEVsTWVzc2FnZS5zdWNjZXNzKCLpqozor4HnoIHlj5HpgIHmiJDlip8iKTsKICAgICAgICAgIHZhciBtZSA9IF90aGlzOwogICAgICAgICAgbWUuaXNEaXNhYmxlZCA9IHRydWU7CiAgICAgICAgICB2YXIgaW50ZXJ2YWwgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBtZS5idXR0b25OYW1lID0gJ++8iCcgKyBtZS50aW1lICsgJ+enku+8ieWQjumHjeaWsOWPkemAgSc7CiAgICAgICAgICAgIC0tbWUudGltZTsKCiAgICAgICAgICAgIGlmIChtZS50aW1lIDwgMCkgewogICAgICAgICAgICAgIG1lLmJ1dHRvbk5hbWUgPSAi6YeN5paw5Y+R6YCBIjsKICAgICAgICAgICAgICBtZS50aW1lID0gNjA7CiAgICAgICAgICAgICAgbWUuaXNEaXNhYmxlZCA9IGZhbHNlOwogICAgICAgICAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKGludGVydmFsKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIEVsTWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHJlZ2lzdGVyOiBmdW5jdGlvbiByZWdpc3RlcigpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLiRyZWZzWydmb3JtJ10udmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBpZiAoIV90aGlzMi5mb3JtLmNvZGUpIHsKICAgICAgICAgICAgRWxNZXNzYWdlLmVycm9yKCLor7floavlhpnpqozor4HnoIEiKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICghX3RoaXMyLmZvcm0ucGFzc3dvcmQpIHsKICAgICAgICAgICAgRWxNZXNzYWdlLmVycm9yKCLor7floavlhpnmlrDlr4bnoIEiKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChfdGhpczIuZm9ybS5wYXNzd29yZCAhPSBfdGhpczIuZm9ybS5jb25maXJtKSB7CiAgICAgICAgICAgIEVsTWVzc2FnZS5lcnJvcigi5Lik5qyh5a+G56CB6L6T5YWl5LiN5LiA6Ie0Iik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICByZXF1ZXN0LnBvc3QoImZvcmdldC9yZWdpc3RlciIsIF90aGlzMi5mb3JtKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgaWYgKHJlcy5jb2RlID09IDApIHsKICAgICAgICAgICAgICBFbE1lc3NhZ2Uuc3VjY2Vzcygi5a+G56CB5L+u5pS55oiQ5YqfIik7CgogICAgICAgICAgICAgIF90aGlzMi4kcm91dGVyLnB1c2goIi9sb2dpbiIpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIEVsTWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["D:\\source\\book-lms\\vue\\src\\views\\Forget.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div  class=\"login-container\"  >\r\n    <el-form ref=\"form\" :model=\"form\"    :rules=\"rules\" class=\"login-page\">\r\n      <h2 class=\"title\" style=\"margin-bottom: 20px\">密码重置</h2>\r\n      <el-form-item prop=\"username\" >\r\n        <el-input v-model=\"form.username\" placeholder=\"请输入您的用户名\" clearable >\r\n        </el-input>\r\n      </el-form-item>\r\n      <el-form-item prop=\"password\">\r\n        <el-input v-model=\"form.password\"  placeholder=\"请输入新密码\" clearable show-password>\r\n        </el-input>\r\n      </el-form-item>\r\n      <el-form-item prop=\"confirm\">\r\n        <el-input v-model=\"form.confirm\" placeholder=\"请再次确认密码\" clearable show-password>\r\n        </el-input>\r\n      </el-form-item>\r\n      <el-form-item>\r\n          <el-input  v-model=\"form.code\" style=\"width: 45%;\" placeholder=\"请输入验证码\"></el-input>\r\n          <el-button type=\"success\" plain  style=\"margin-left: 10px\" @click=\"getcode\" :disabled=\"isDisabled\">{{buttonName}}</el-button>\r\n      </el-form-item>\r\n      <el-form-item >\r\n        <el-button type=\"primary\" style=\" width: 100%;font-size: 18px\" @click=\"register\">密码重置</el-button>\r\n      </el-form-item>\r\n      <el-form-item><el-button type=\"text\" style=\"font-size: 16px\"  @click=\"$router.push('/login')\">前往登录>> </el-button></el-form-item>\r\n    </el-form>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport request from \"../utils/request\";\r\nimport {ElMessage} from \"element-plus\";\r\nexport default {\r\n  name: \"Forget\",\r\n  data(){\r\n    return{\r\n      buttonName: \"获取短信验证码\",\r\n      isDisabled: false,\r\n      time: 60,\r\n      form:{},\r\n      rules: {\r\n        username: [\r\n          {\r\n            required: true,\r\n            message: '请输入用户名',\r\n            trigger: 'blur',\r\n          },\r\n          {\r\n            min: 2,\r\n            max: 13,\r\n            message: '长度要求为2到13位',\r\n            trigger: 'blur',\r\n          },\r\n        ],\r\n        password: [\r\n          {\r\n            required: true,\r\n            message: '请输入密码',\r\n            trigger: 'blur',\r\n          }\r\n        ],\r\n        confirm:[\r\n          {\r\n            required:true,\r\n            message:\"请确认密码\",\r\n            trigger:\"blur\"\r\n          }\r\n        ],\r\n      }\r\n    }\r\n  },\r\n\r\n  methods:{\r\n    getcode(){\r\n      if (!this.form.username) {\r\n        ElMessage.error(\"请填写用户名\")\r\n        return\r\n      }\r\n      if (!this.form.password) {\r\n        ElMessage.error(\"请填写新密码\")\r\n        return\r\n      }\r\n      if(this.form.password != this.form.confirm)\r\n      {\r\n        ElMessage.error(\"两次密码输入不一致\")\r\n        return\r\n      }\r\n      request.get(\"forget/getcode\",{\r\n        params:{\r\n          username:this.form.username\r\n        }\r\n      }).then(res=>{\r\n        if (res.code == 0) {\r\n          ElMessage.success(\"验证码发送成功\")\r\n          let me = this;\r\n          me.isDisabled = true;\r\n          let interval = window.setInterval(function() {\r\n            me.buttonName = '（' + me.time + '秒）后重新发送';\r\n            --me.time;\r\n            if(me.time < 0) {\r\n              me.buttonName = \"重新发送\";\r\n              me.time = 60;\r\n              me.isDisabled = false;\r\n              window.clearInterval(interval);\r\n            }\r\n          }, 1000);\r\n        } else {\r\n          ElMessage.error(res.msg)\r\n        }\r\n      })\r\n    },\r\n    register(){\r\n      this.$refs['form'].validate((valid) => {\r\n        if (valid) {\r\n          if (!this.form.code) {\r\n            ElMessage.error(\"请填写验证码\")\r\n            return\r\n          }\r\n          if (!this.form.password) {\r\n            ElMessage.error(\"请填写新密码\")\r\n            return\r\n          }\r\n          if(this.form.password != this.form.confirm)\r\n          {\r\n            ElMessage.error(\"两次密码输入不一致\")\r\n            return\r\n          }\r\n          request.post(\"forget/register\",this.form).then(res=>{\r\n            if(res.code == 0)\r\n            {\r\n              ElMessage.success(\"密码修改成功\")\r\n              this.$router.push(\"/login\")\r\n            }\r\n            else {ElMessage.error(res.msg)}\r\n          })\r\n        }\r\n      })\r\n\r\n    }\r\n  }\r\n\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.login-container {\r\n  position: fixed;\r\n  width: 100%;\r\n  height: 100%;\r\n  background: url('../img/bg2.svg');\r\n  background-size: contain;\r\n}\r\n.login-page {\r\n  border-radius: 5px;\r\n  margin: 180px auto;\r\n  width: 350px;\r\n  padding: 35px 35px 15px;\r\n  background: #fff;\r\n  border: 1px solid #eaeaea;\r\n  box-shadow: 0 0 25px #cac6c6;\r\n}\r\n</style>"],"sourceRoot":""}]}